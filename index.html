<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Tableau de bord — Solde</title>
  <style>
    :root{
      --bg:#f3f4f9;
      --card:#ffffff;
      --muted:#8b8f98;
      --accent:#2b6cff;
      --pill:#eef2ff;
      --shadow:0 6px 20px rgba(20,20,40,0.06);
      font-family: Inter, ui-sans-serif, system-ui, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    html,body{height:100%;margin:0;background:linear-gradient(180deg,#f7f8fc 0%,#f3f4f9 100%);color:#111;}
    .wrap{max-width:420px;margin:18px auto;padding:18px;}
    .balance-card{background:var(--card);border-radius:14px;padding:16px 18px;box-shadow:var(--shadow)}
    .bal-top{display:flex;align-items:center;gap:12px}
    .logo-circle{width:34px;height:34px;border-radius:8px;background:#fff;display:flex;align-items:center;justify-content:center;overflow:hidden;}
    .balance-amount{font-size:34px;font-weight:700;margin-top:8px}
    .balance-sub{font-size:13px;color:var(--muted);margin-top:6px}
    h2{margin:18px 0 8px 0;font-size:16px}
    .activity{display:flex;flex-direction:column;gap:12px}
    .txn{background:var(--card);border-radius:12px;padding:12px;display:flex;align-items:center;justify-content:space-between;box-shadow:var(--shadow)}
    .txn .meta{display:flex;gap:12px;align-items:center}
    .icon{width:44px;height:44px;border-radius:10px;background:var(--pill);display:flex;align-items:center;justify-content:center;font-weight:700}
    .txn .desc{display:flex;flex-direction:column}
    .txn .desc .who{font-weight:600}
    .txn .desc .when{font-size:12px;color:var(--muted)}
    .amount{font-weight:700}
    .amount.green{color:seagreen}
    .amount.gray{color:var(--muted)}
    .nav{position:fixed;left:50%;transform:translateX(-50%);bottom:14px;display:flex;gap:14px;background:transparent}
    .nav button{min-width:140px;padding:12px 18px;border-radius:28px;border:0;background:#000;color:#fff;font-weight:700}
    .nav .outline{background:#fff;color:#000;border:1px solid #e6e8ef}
    /* modal */
    #contactModal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);align-items:center;justify-content:center;z-index:10;overflow:auto}
    #contactModal .modal-content{background:white;padding:24px;border-radius:12px;max-width:400px;width:90%;position:relative;box-shadow:var(--shadow);}
    #contactModal h3{margin-top:0;text-align:center;}
    #contactModal label{display:block;margin-top:10px;font-weight:600;}
    #contactModal input{width:100%;padding:8px;margin-top:4px;border:1px solid #ccc;border-radius:6px;box-sizing:border-box;}
    #contactModal button{margin-top:12px;padding:10px 18px;border:none;border-radius:8px;background:#2b6cff;color:white;font-weight:700;cursor:pointer;width:100%;}
    #contactModal .close-btn{background:#aaa;margin-top:8px;}
    #selectedContact{margin-top:12px;padding:8px;border:1px solid #ccc;border-radius:6px;background:#f7f7f7;}
  </style>
</head>
<body>
<div class="wrap">
  <div class="balance-card">
    <div class="bal-top">
      <div class="logo-circle">
        <img src="https://cdn.shopify.com/s/files/1/0602/1857/3035/files/IMG_2477.jpg?v=1762027810" alt="Logo" style="width:100%;height:100%;object-fit:cover;">
      </div>
      <div>
        <div class="small">Disponible</div>
        <div id="balance" class="balance-amount">1,000,000,00 €</div>
        <div class="balance-sub">Solde PayPal</div>
      </div>
    </div>
  </div>

  <h2>Activité récente</h2>
  <div class="activity" id="activityList"></div>
</div>

<div class="nav">
  <button id="payerBtn">Payer</button>
  <button class="outline">Recevoir des paiements</button>
</div>

<!-- Modal -->
<div id="contactModal">
  <div class="modal-content">
    <h3>Payer un contact</h3>
    <label for="contactInput">Nom, Nom d’utilisateur, Email :</label>
    <input type="text" id="contactInput" placeholder="Nom, Nom d’utilisateur, Email">
    <button id="addContactBtn">Ajouter contact</button>

    <div id="selectedContact">Aucun contact sélectionné</div>

    <label for="amount">Somme à payer (€) :</label>
    <input type="number" id="amount" placeholder="Entrer un montant">

    <button id="payBtn">Payer</button>
    <button class="close-btn" id="closeModal">Fermer</button>
  </div>
</div>

<script>
let balance = 750000.00;
const transactions = [
  {who:'Wearspective', date:'1 oct. 2025', note:'Facture reçue - En attente', amount:-180.00, style:'gray'},
  {who:'Jermeytebri@gmail.com', date:'10 août 2025', note:'Demande envoyée - Annulé', amount:+1000.00, style:'green'}
];

function fmt(n){return n.toLocaleString('fr-FR',{minimumFractionDigits:2,maximumFractionDigits:2})+' €';}

// Affichage solde
const balanceEl = document.getElementById('balance');
balanceEl.textContent = fmt(balance);

// Affichage historique
const activityList = document.getElementById('activityList');
function renderTransactions(){
  activityList.innerHTML='';
  transactions.forEach(tx=>{
    const node=document.createElement('div');
    node.className='txn';
    node.innerHTML=`
      <div class="meta">
        <div class="icon">${tx.who.charAt(0).toUpperCase()}</div>
        <div class="desc">
          <div class="who">${tx.who}</div>
          <div class="when">${tx.date}</div>
          <div class="small" style="margin-top:6px">${tx.note}</div>
        </div>
      </div>
      <div class="amount ${tx.style}">${tx.amount>=0?'+':''}${fmt(tx.amount)}</div>`;
    activityList.appendChild(node);
  });
}
renderTransactions();

// Modal logic
const modal = document.getElementById('contactModal');
const payerBtn = document.getElementById('payerBtn');
const closeModal = document.getElementById('closeModal');
const contactInput = document.getElementById('contactInput');
const addContactBtn = document.getElementById('addContactBtn');
const selectedContact = document.getElementById('selectedContact');
const payBtn = document.getElementById('payBtn');
const amountInput = document.getElementById('amount');
const contacts = [];

payerBtn.addEventListener('click',()=>{modal.style.display='flex';});
closeModal.addEventListener('click',()=>{modal.style.display='none';});

addContactBtn.addEventListener('click',()=>{
  const value=contactInput.value.trim();
  if(value){contacts.push(value);selectedContact.textContent=value;contactInput.value='';}
});

payBtn.addEventListener('click',()=>{
  const montant=parseFloat(amountInput.value);
  if(!selectedContact.textContent || selectedContact.textContent==='Aucun contact sélectionné'){alert('Veuillez saisir un contact.');return;}
  if(!montant || montant<=0){alert('Veuillez entrer une somme valide.');return;}
  if(montant>balance){alert('Solde insuffisant !');return;}

  // Déduire solde
  balance -= montant;
  balanceEl.textContent = fmt(balance);

  // Ajouter à historique
  const today = new Date();
  const dateStr = today.toLocaleDateString('fr-FR');
  transactions.unshift({who:selectedContact.textContent, date:dateStr, note:'Paiement effectué', amount:-montant, style:'gray'});
  renderTransactions();

  // Reset modal
  amountInput.value='';
  selectedContact.textContent='Aucun contact sélectionné';
  modal.style.display='none';
});
</script>
</body>
</html>